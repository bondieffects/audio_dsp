flowchart TB
    %% I2S Clock Generator Block Diagram (Simplified)
    
    subgraph inputs ["External Inputs"]
        MCLK_IN[i2s_mclk<br/>12.288MHz]
        RESET_IN[reset_n<br/>Active Low]
    end
    
    subgraph outputs ["Clock Outputs"]
        BCLK_OUT[i2s_bclk<br/>1.536MHz]
        WS_OUT[i2s_ws<br/>48kHz]
    end
    
    subgraph bclk_gen ["BCLK Generator"]
        BCLK_CTR["BCLK Counter<br/>Divide by 8 (3-bit)"]
        BCLK_BIT["Bit 2 Extract<br/>MSB"]
    end
    
    subgraph ws_gen ["WS Generator"]
        WS_CTR["WS Counter<br/>Divide by 256 (8-bit)"]
        WS_BIT["Bit 7 Extract<br/>MSB"]
    end
    
    %% Main Signal Flow
    MCLK_IN --> bclk_gen
    MCLK_IN --> ws_gen
    RESET_IN --> bclk_gen
    RESET_IN --> ws_gen
    
    %% BCLK Generation Chain
    MCLK_IN --> BCLK_CTR
    BCLK_CTR --> BCLK_BIT
    BCLK_BIT --> BCLK_OUT
    
    %% WS Generation Chain - Direct from MCLK
    MCLK_IN --> WS_CTR
    WS_CTR --> WS_BIT
    WS_BIT --> WS_OUT

    %% Styling - Colorful and distinct
    classDef inputStyle fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000
    classDef outputStyle fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000
    classDef bclkStyle fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000
    classDef wsStyle fill:#ffebee,stroke:#c62828,stroke-width:2px,color:#000
    
    class MCLK_IN,RESET_IN inputStyle
    class BCLK_OUT,WS_OUT outputStyle
    class BCLK_CTR,BCLK_BIT bclkStyle
    class WS_CTR,WS_BIT wsStyle